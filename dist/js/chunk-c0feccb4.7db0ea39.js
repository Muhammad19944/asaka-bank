(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0feccb4"],{7262:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("useful-create-form",{attrs:{TYPE:e.$store.state.FORM_TYPE.UPDATE}})},l=[],i=a("c454"),r={name:"Update",components:{UsefulCreateForm:i["a"]}},o=r,n=a("0c7c"),d=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=d.exports},"8d9d":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(" "+e._s(e.label)+" "),e.subLabel?[a("span",{staticClass:"red--text"},[e._v("("+e._s(e.subLabel)+")")])]:e._e()],2),a("div",{staticClass:"d-flex align-center"},[a("v-file-input",{staticClass:"file-uploader mr-2",attrs:{disabled:e.disabled||e.readonly,"prepend-icon":"",accept:"image/png, image/jpeg, image/jpg, image/bmp",outlined:"","hide-details":""},on:{change:e.upload},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-btn",{staticStyle:{"margin-top":"-6px"},attrs:{depressed:"",color:"rgba(var(--primary), 1)"}},[a("span",{staticClass:"text-transform-reset text-white"},[e._v(e._s(e.$t("Dashboard.upload_file")))])])]},proxy:!0}]),model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),e.value?[a("span",{staticClass:"d-none"},[e._v(e._s(e.hidden))]),e.fileThumb.visible?[a("div",{staticClass:"file-upload-wrap rounded overflow-hidden p-relative"},[e.extension?[a("a",{staticClass:"border-all d-flex align-center justify-center w-100 h-100 rounded",attrs:{href:"#"}},[a("file-text-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})],1)]:[a("img",{staticClass:"d-block img-cover",attrs:{src:e.$http.defaults.baseURL+e.fileThumb.url,alt:"Card image"}})],a("div",{staticClass:"file-upload-actions p-absolute w-100 h-100 d-flex align-center justify-space-around px-2 transition-ease-in-out"},[a("a",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{href:e.$http.defaults.baseURL+e.fileThumb.url,download:"",target:"_blank",rel:"noopener noreferrer"}},[a("download-icon",{staticClass:"text-white d-block",attrs:{size:"1.2x"}})],1),e.readonly?e._e():[a("button",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{type:"button"},on:{click:e.deleteFile}},[a("trash2-icon",{staticClass:"text-white d-block",attrs:{size:"1.1x"}})],1)]],2)],2)]:e._e()]:e._e()],2)])},l=[],i=a("0a35"),r={name:"FileUpload",props:{label:{type:String},subLabel:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},components:{EyeIcon:i["n"],Trash2Icon:i["M"],FileTextIcon:i["q"],DownloadIcon:i["k"]},computed:{extension(){return["pdf","PDF","doc","docx","DOC","csv","CSV","xls","XLS"].includes(this.fileThumb.url.slice(-3))},hidden(){return{url:this.fileThumb.url=this.value.url,visible:this.fileThumb.visible=!0}}},watch:{value(e){e&&(this.fileThumb.visible=!0,this.fileThumb.url=e.url)}},data(){return{template:"",file:[],fileThumb:{url:"",visible:!1},fileList:[]}},methods:{upload(e){let t=new FormData;t.append("file",e),this.$http.post("/upload/",t).then(({data:e})=>{this.$toast.success("Rasm yuklandi"),this.$emit("emit:up",e),this.fileThumb.url=e.url,this.fileThumb.visible=!0}).catch(()=>this.$t("Dashboard.e"))},deleteFile(e){confirm(this.$t("Dashboard.d"))&&(this.fileThumb.visible=!1,this.fileThumb.url="",this.file=[])}}},o=r,n=a("0c7c"),d=Object(n["a"])(o,s,l,!1,null,null,null);t["a"]=d.exports},c454:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"useful-form-view"},[a("app-card",[a("div",{staticClass:"form-wrap d-flex flex-column m-h-100 pa-5 px-6"},[a("div",{staticClass:"d-flex align-center mb-8"},[a("h4",{staticClass:"text--primary text-uppercase font-700 mr-4"},[e._v(" "+e._s("Create"===e.TYPE?e.$t("Dashboard.add_new"):"Update"===e.TYPE?e.$t("Dashboard.update"):e.$t("Dashboard.read"))+" ")]),a("v-divider",{staticStyle:{"border-color":"rgb(var(--border-color), 1)"}})],1),a("div",{staticClass:"flex-1"},[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[e._v("Sarlavha (UZ)")]),a("v-text-field",{attrs:{error:e.$v.usefulModel.name_uz.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usefulModel.name_uz.$model,callback:function(t){e.$set(e.$v.usefulModel.name_uz,"$model",t)},expression:"$v.usefulModel.name_uz.$model"}})],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[e._v("Sarlavha (RU)")]),a("v-text-field",{attrs:{error:e.$v.usefulModel.name_ru.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usefulModel.name_ru.$model,callback:function(t){e.$set(e.$v.usefulModel.name_ru,"$model",t)},expression:"$v.usefulModel.name_ru.$model"}})],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[e._v("Sarlavha (EN)")]),a("v-text-field",{attrs:{error:e.$v.usefulModel.name_en.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usefulModel.name_en.$model,callback:function(t){e.$set(e.$v.usefulModel.name_en,"$model",t)},expression:"$v.usefulModel.name_en.$model"}})],1)]),a("v-col",{attrs:{md:"4"}},[a("file-upload",{ref:"propFile",attrs:{value:e.propFile,disabled:"Read"===e.TYPE,label:e.$t("Dashboard.upload_photo")},on:{"emit:up":e.upload}})],1),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[e._v("Havola (Website)")]),a("v-text-field",{attrs:{readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.usefulModel.link,callback:function(t){e.$set(e.usefulModel,"link",t)},expression:"usefulModel.link"}})],1)])],1)],1),a("div",{staticClass:"mt-8"},[a("go-back-button"),"Create"===e.TYPE?[a("send-button",{attrs:{text:e.$t("Dashboard.create")},on:{"emit:up":e.send}})]:"Update"===e.TYPE?[a("send-button",{attrs:{text:e.$t("Dashboard.update")},on:{"emit:up":e.update}})]:e._e()],2)])])],1)},l=[],i=a("87d8"),r=a("8d9d"),o=a("9e43"),n=a("0130"),d=a("b5ae"),u={name:"UsefulCreateForm",props:{TYPE:{type:String,default:""}},components:{AppCard:i["a"],FileUpload:r["a"],GoBackButton:o["a"],SendButton:n["a"]},data(){return{propFile:null,usefulModel:{name_uz:"",name_ru:"",name_en:"",image:null,link:""}}},validations:{usefulModel:{name_uz:{required:d["required"]},name_ru:{required:d["required"]},name_en:{required:d["required"]}}},mounted(){this.$route.params.id&&this.getOne()},methods:{send(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):(this.usefulModel.image=this.propFile.id,this.$http.post(`/${this.$store.state.auth.COMPANY_ID}/link/`,this.usefulModel).then(()=>{this.$toast.success("Yaratildi"),setTimeout(()=>{this.$router.push({name:"DashboardUsefulLinksList"})},1500)}).catch(()=>{this.$toast.error("Yaratishda xatolik")}))},update(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):(this.usefulModel.image=this.propFile.id,this.$http.put(`/${this.$store.state.auth.COMPANY_ID}/link/${this.$route.params.id}`).then(()=>{this.$toast.success("Yangilandi"),setTimeout(()=>{this.$router.push({name:"DashboardUsefulLinksList"})},1500)}).catch(()=>{this.$toast.error("Yangilashda xatolik")}))},getOne(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/link/${this.$route.params.id}`).then(({data:e})=>{this.usefulModel.name_uz=e.name_uz,this.usefulModel.name_ru=e.name_ru,this.usefulModel.name_en=e.name_en,this.usefulModel.link=e.link,this.propFile=e.image})},upload(e){this.propFile=e}}},c=u,p=a("0c7c"),h=Object(p["a"])(c,s,l,!1,null,null,null);t["a"]=h.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aa91e16"],{"0a7f":function(t,e,a){"use strict";a("a11d")},a11d:function(t,e,a){},bf7d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"main-auth"},[s("v-container",[e.validationErrors?s("AppValidationErrors",{attrs:{"validation-errors":e.validationErrors}}):e._e(),s("v-form",{ref:"form",staticClass:"auth-form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.clickHandler.apply(null,arguments)}}},[s("v-row",[s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("div",{staticClass:"d-flex align-center"},[s("h4",{staticClass:"font-600 dark-text mr-1 line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.byPhone"}})],1),"email"===e.verification_type?[s("span",{staticClass:"font-600 line-base",staticStyle:{color:"red","font-size":"14px"}},[e._v(" ("),s("I18nVue",{attrs:{t:"Auth.SignUp.byEmail"}}),e._v(") ")],1)]:[s("span",{staticClass:"font-600 line-base",staticStyle:{color:"red","font-size":"14px"}})]],2),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{staticClass:"auth-input",attrs:{error:e.$v.username.$error,rules:[function(t){return!!t||e.$t("Auth.SignUp.enterPlease")},200===e.check||e.$t("Auth.SignUp.userExist")],placeholder:"email"===e.verification_type?e.$t("Auth.SignUp.enterEmail"):e.$t("Auth.SignUp.byPhone"),solo:"",outlined:"",id:"email"},model:{value:e.$v.username.$model,callback:function(t){e.$set(e.$v.username,"$model",t)},expression:"$v.username.$model"}})],1),s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("h4",{staticClass:"font-600 dark-text line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.phone"}})],1),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+ 998 ## ### ## ##",expression:"'+ 998 ## ### ## ##'"}],staticClass:"auth-input",attrs:{placeholder:e.$t("Auth.SignUp.phonePlaceholder"),rules:[e.rules.phone,e.rules.phone_required],error:e.$v.phone_number.$error,id:"phone",maxlength:"18",required:"",solo:"",outlined:"",minlength:"18"},model:{value:e.$v.phone_number.$model,callback:function(t){e.$set(e.$v.phone_number,"$model",t)},expression:"$v.phone_number.$model"}})],1),s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("h4",{staticClass:"font-600 dark-text line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.name"}})],1),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{staticClass:"auth-input",attrs:{rules:[function(t){return!!t||e.$t("Auth.SignUp.enterName")}],label:e.$t("Auth.SignUp.enterName"),id:"first_name",type:"text",error:e.$v.first_name.$error,required:"",solo:"",outlined:""},model:{value:e.$v.first_name.$model,callback:function(t){e.$set(e.$v.first_name,"$model",t)},expression:"$v.first_name.$model"}})],1),s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("h4",{staticClass:"font-600 dark-text line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.family"}})],1),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{staticClass:"auth-input",attrs:{rules:[function(t){return!!t||e.$t("Auth.SignUp.enterFamily")}],label:e.$t("Auth.SignUp.enterFamily"),id:"last_name",type:"text",error:e.$v.last_name.$error,required:"",outlined:"",solo:""},model:{value:e.$v.last_name.$model,callback:function(t){e.$set(e.$v.last_name,"$model",t)},expression:"$v.last_name.$model"}})],1),s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("h4",{staticClass:"font-600 dark-text line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.fatherName"}})],1),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{staticClass:"auth-input",attrs:{rules:[function(e){return!!e||t.$t("Auth.SignUp.enterFatherName")}],label:this.$t("Auth.SignUp.enterFatherName"),id:"father_name",type:"text",error:e.$v.father_name.$error,required:"",outlined:"",solo:""},model:{value:e.$v.father_name.$model,callback:function(t){e.$set(e.$v.father_name,"$model",t)},expression:"$v.father_name.$model"}})],1),void 0,s("v-col",{staticClass:"col-12",attrs:{sm:"12",md:"6",xl:"6"}},[s("h4",{staticClass:"font-600 dark-text line-base"},[s("I18nVue",{attrs:{t:"Auth.SignUp.pass"}})],1),s("v-divider",{staticClass:"mt-3 mb-8",staticStyle:{"border-color":"rgba(var(--border-color), 1)"}}),s("v-text-field",{staticClass:"auth-input",attrs:{rules:[e.rules.required,e.rules.min],id:"password",error:e.$v.password.$error,"append-icon":e.show?"mdi-eye":"mdi-eye-off",label:this.$t("Auth.SignUp.passLabel"),type:e.show?"text":"password",hint:this.$t("Auth.SignUp.passHint"),counter:"20",required:"",outlined:"",solo:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.$v.password.$model,callback:function(t){e.$set(e.$v.password,"$model",t)},expression:"$v.password.$model"}})],1),s("v-col",{staticClass:"col-12"}),s("p",{staticClass:"login_link-wrap"},[s("router-link",{attrs:{to:{name:"Login"}}},[s("I18nVue",{attrs:{t:"Auth.SignUp.entry"}})],1),s("router-link",{attrs:{to:{name:"Forget"}}},[s("I18nVue",{attrs:{t:"Auth.SignUp.forget"}})],1)],1),s("v-btn",{staticClass:"btn--red",attrs:{depressed:"",type:"submit"}},[e._v(" "+e._s(e.$t("Auth.SignUp.sign_up"))+" ")]),s("Verify",{ref:"verifyDialog",attrs:{parentThis:this,verification_type:e.verification_type,phone:e.phone_number,disabled:this.$v.$invalid}})],2)],1)],1)],1)},r=[],i=a("3b2b"),n=a("c7d4"),o=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.getUser?["phone"===t.getUser.verification_type?a("v-card",[a("v-card-title",{staticClass:"justify-space-between mb-4"},[a("I18nVue",{attrs:{classes:"text-h6",t:"Auth.Verify.smsCode"}}),a("span",{staticClass:"font-600 text--h5"},[t._v(t._s(t.countDownDate.minute)+" мин : "+t._s(t.countDownDate.second<=9?"0"+t.countDownDate.second:t.countDownDate.second)+" сек")])],1),a("v-card-text",{staticClass:"pb-2"},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-7"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Auth.Verify.number")))]),a("v-text-field",{attrs:{value:"+"+t.getUser.phone_number,disabled:"",outlined:"","hide-details":""}})],1),a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Auth.Verify.codeLabel")))]),a("v-text-field",{attrs:{outlined:"",hint:t.$t("Auth.Verify.codeHint"),"persistent-hint":""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)]),a("v-card-actions",[a("div",{staticClass:"px-2 pb-3 d-flex align-center justify-space-between w-100"},[a("v-btn",{attrs:{disabled:t.disableResendButton,color:"blue darken-1",depressed:"","min-width":"125","min-height":"42"},on:{click:t.Resend}},[a("I18nVue",{staticClass:"reset-size font-600 text-transform-reset text-white",staticStyle:{"letter-spacing":"0.025rem"},attrs:{t:"Auth.Verify.resendCode"}})],1),a("v-btn",{attrs:{color:"success darken-1",depressed:"",dark:"","min-width":"125","min-height":"42"},on:{click:function(e){return e.preventDefault(),t.Save.apply(null,arguments)}}},[a("I18nVue",{staticClass:"reset-size font-600 text-transform-reset",staticStyle:{"letter-spacing":"0.025rem"},attrs:{t:"Auth.Verify.confirmation"}})],1)],1)])],1):a("v-card",{staticClass:"danger_tab"},[a("v-card-title",{staticClass:"header"},[a("I18nVue",{attrs:{t:"Auth.Verify.eConf"}})],1),a("v-card-text",{staticClass:"body"},[a("I18nVue",{attrs:{t:"Auth.Verify.eConf2"}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success darken-1",depressed:"",dark:"","min-width":"125","min-height":"42"},on:{click:function(e){return e.preventDefault(),t.closeModal.apply(null,arguments)}}},[a("I18nVue",{staticClass:"reset-size font-600 text-transform-reset",staticStyle:{"letter-spacing":"0.025rem"},attrs:{t:"Auth.Verify.ok"}})],1)],1)],1)]:t._e()],2)],1)},u=[],c=a("d1f9"),d={name:"Verify",components:{I18nVue:c["a"]},props:{parentThis:{type:Object,default:()=>{}}},data:()=>({dialog:!1,code:"",countDownDate:{minute:0,second:0},countInterval:0,disableResendButton:!0}),computed:{getUser(){return this.$store.getters.getUser}},methods:{openModal(){this.dialog=!0,this.countDown()},closeModal(){this.dialog=!1,this.clearCountDown()},countDown(t=2){let e=60*t,a=60,s=null;this.countInterval=setInterval(()=>{if(a<=0&&(a=60),e<=0)return clearInterval(this.countInterval),this.disableResendButton=!1,!1;e--,a--,s=Math.floor(e/60),this.countDownDate.minute=s,this.countDownDate.second=a},1e3)},clearCountDown(){this.countDownDate.minute=this.countDownDate.second=0,this.disableResendButton=!0,clearInterval(this.countInterval)},Save(){this.$http.post(`/verify/phone/${this.getUser.phone_number}/${this.code}/`).then(t=>{this.$router.push({name:"Login"}),this.$toast.success(`${this.$t("Auth.Verify.conf")} ${"uz"===this.$i18n.locale?t.data.uz:"ru"===this.$i18n.locale?t.data.ru:t.data.en}`),this.dialog=!1,this.clearCountDown()},t=>this.$toast.error(`${this.$t("Auth.Verify.error")} ${"uz"===this.$i18n.locale?t.data.uz:"ru"===this.$i18n.locale?t.data.ru:t.data.en}`)).catch(t=>this.$toast.error(`${this.$t("Auth.Verify.error1")} ${"uz"===this.$i18n.locale?t.data.uz:"ru"===this.$i18n.locale?t.data.ru:t.data.en}`))},Resend(){this.clearCountDown(),this.countDown(),this.$http.post(`/resend/verification/${this.getUser.phone_number}/`).then(t=>this.$toast.success(""+("uz"===this.$i18n.locale?t.data.detail.uz:"ru"===this.$i18n.locale?t.data.detail.ru:t.data.detail.en)),t=>this.$toast.error(""+("uz"===this.$i18n.locale?t.data.detail.uz:"ru"===this.$i18n.locale?t.data.detail.ru:t.data.detail.en))).catch(t=>this.$toast.error(`${this.$t("Auth.Verify.error")} ${"uz"===this.$i18n.locale?t.data.detail.uz:"ru"===this.$i18n.locale?t.data.detail.ru:t.data.detail.en}`))}}},h=d,m=(a("0a7f"),a("0c7c")),p=Object(m["a"])(h,l,u,!1,null,null,null),v=p.exports,f=a("b5ae"),$=a("c4a0"),b={name:"Register",components:{I18nVue:c["a"],Verify:v,AppValidationErrors:i["a"]},data(){return{show:!1,disabled:!0,check:null,username:"",phone_number:"",first_name:"",last_name:"",father_name:"",verification_type:"phone",password:"",select_type:[{text_uz:"Telefon orqali",text_ru:"По телефону",text_en:"By phone",value:"phone"},{text_uz:"Elektron pochta orqali",text_ru:"По электронной почте",text_en:"By email",value:"email"}],rules:{required:t=>!!t||this.$t("Auth.SignUp.enterPassCor"),min:t=>t.length>=8||this.$t("Auth.SignUp.enterPassCor"),phone:t=>t.length<=18||this.$t("Auth.SignUp.example"),phone_required:t=>!!t||this.$t("Auth.SignUp.numberMandatory")}}},validations:{username:{required:f["required"],email(t){return"phone"===this.verification_type||Object(f["email"])(t)}},first_name:{required:f["required"]},last_name:{required:f["required"]},father_name:{required:f["required"]},verification_type:{required:f["required"]},phone_number:{required:f["required"]},password:{required:f["required"]}},computed:Object(o["e"])({isSubmitting:t=>t.auth.isSubmitting,validationErrors:t=>t.auth.validationErrors}),watch:{username(){window.addEventListener("keyup",this.debounceCheckUsername())}},created(){this.debounceCheckUsername=Object($["d"])(()=>this.checkUsername(),750)},methods:{clickHandler(){if(this.$v.$touch(),this.$v.$invalid)return;const{verifyDialog:t}=this.$refs;this.$store.dispatch(n["a"].register,{username:this.username,first_name:this.first_name,last_name:this.last_name,father_name:this.father_name,verification_type:this.verification_type,phone_number:this.phone_number.replace(/[^0-9]/g,""),password:this.password}).then(()=>{this.$toast.success(this.$t("Auth.SignUp.registered")),console.log(t),t.dialog=!t.dialog,t.openModal()}).catch(({data:t})=>{let e="";e="uz"===this.$i18n.locale?"Telefon raqami allaqachon mavjud":"ru"===this.$i18n.locale?"Номер телефона уже существует":"Phone number already exists",this.$toast.error(e)})},checkUsername(){this.$http.get("/check/"+this.username).then(t=>{this.check=t.status}).catch(({data:t})=>{this.$toast.error(t.detail[this.$i18n.locale])})}}},g=b,_=Object(m["a"])(g,s,r,!1,null,null,null);e["default"]=_.exports}}]);
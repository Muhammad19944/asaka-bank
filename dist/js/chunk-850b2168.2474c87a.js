(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-850b2168"],{"0e14":function(e,s,t){"use strict";var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"category-form-view"},[t("app-card",[t("div",{staticClass:"form-wrap d-flex flex-column m-h-100 pa-5 px-6"},[t("div",{staticClass:"d-flex align-center mb-8"},[t("h4",{staticClass:"text--primary text-uppercase font-700 mr-4"},[e._v(" "+e._s("Create"===e.TYPE?e.$t("Dashboard.add_new"):"Update"===e.TYPE?e.$t("Dashboard.update"):e.$t("Dashboard.read"))+" ")]),t("v-divider",{staticStyle:{"border-color":"rgb(var(--border-color), 1)"}})],1),t("div",{staticClass:"flex-1"},[t("v-row",[t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(" "+e._s(e.$t("username"))+" ")]),t("v-text-field",{attrs:{error:e.$v.usersModel.username.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usersModel.username.$model,callback:function(s){e.$set(e.$v.usersModel.username,"$model",s)},expression:"$v.usersModel.username.$model"}})],1)]),t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("first_name")))]),t("v-text-field",{attrs:{error:e.$v.usersModel.first_name.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usersModel.first_name.$model,callback:function(s){e.$set(e.$v.usersModel.first_name,"$model",s)},expression:"$v.usersModel.first_name.$model"}})],1)]),t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("last_name")))]),t("v-text-field",{attrs:{error:e.$v.usersModel.last_name.$error,readonly:"Read"===e.TYPE,outlined:"","hide-details":""},model:{value:e.$v.usersModel.last_name.$model,callback:function(s){e.$set(e.$v.usersModel.last_name,"$model",s)},expression:"$v.usersModel.last_name.$model"}})],1)]),t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("role")))]),t("v-select",{attrs:{error:e.$v.usersModel.role.$error,items:e.rolesList,"item-text":"name","item-value":"code",readonly:"Read"===e.TYPE,outlined:"","hide-details":""},scopedSlots:e._u([{key:"append",fn:function(){return[t("chevron-down-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})]},proxy:!0}]),model:{value:e.$v.usersModel.role.$model,callback:function(s){e.$set(e.$v.usersModel.role,"$model",s)},expression:"$v.usersModel.role.$model"}})],1)]),t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("filial")))]),"uz"===e.$i18n.locale?[t("v-select",{attrs:{error:e.$v.usersModel.company.$error,items:e.filialList,"item-text":"uz"===e.$i18n.locale?"name_uz":"ru"===e.$i18n.locale?"name_ru":"name_en","item-value":"id",readonly:"Read"===e.TYPE,outlined:"","hide-details":""},scopedSlots:e._u([{key:"append",fn:function(){return[t("chevron-down-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})]},proxy:!0}],null,!1,2932708987),model:{value:e.$v.usersModel.company.$model,callback:function(s){e.$set(e.$v.usersModel.company,"$model",s)},expression:"$v.usersModel.company.$model"}})]:e._e(),"ru"===e.$i18n.locale?[t("v-select",{attrs:{error:e.$v.usersModel.company.$error,items:e.filialList,"item-text":"name_ru","item-value":"id",readonly:"Read"===e.TYPE,outlined:"","hide-details":""},scopedSlots:e._u([{key:"append",fn:function(){return[t("chevron-down-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})]},proxy:!0}],null,!1,2932708987),model:{value:e.$v.usersModel.company.$model,callback:function(s){e.$set(e.$v.usersModel.company,"$model",s)},expression:"$v.usersModel.company.$model"}})]:e._e(),"en"===e.$i18n.locale?[t("v-select",{attrs:{error:e.$v.usersModel.company.$error,items:e.filialList,"item-text":"name_en","item-value":"id",readonly:"Read"===e.TYPE,outlined:"","hide-details":""},scopedSlots:e._u([{key:"append",fn:function(){return[t("chevron-down-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})]},proxy:!0}],null,!1,2932708987),model:{value:e.$v.usersModel.company.$model,callback:function(s){e.$set(e.$v.usersModel.company,"$model",s)},expression:"$v.usersModel.company.$model"}})]:e._e()],2)]),"Update"!==e.TYPE&&"Read"!==e.TYPE?[t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("password")))]),t("v-text-field",{attrs:{error:e.$v.usersModel.password.$error,"append-icon":e.passwordShow?"mdi-eye":"mdi-eye-off",type:e.passwordShow?"text":"password",readonly:"Read"===e.TYPE,maxlength:"20",outlined:"","hide-details":""},on:{"click:append":function(s){e.passwordShow=!e.passwordShow}},model:{value:e.$v.usersModel.password.$model,callback:function(s){e.$set(e.$v.usersModel.password,"$model",s)},expression:"$v.usersModel.password.$model"}})],1)])]:e._e(),"Update"!==e.TYPE&&"Read"!==e.TYPE?[t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[t("h5",{staticClass:"font-600 dark-text mb-1"},[e._v(e._s(e.$t("repeat_password")))]),t("v-text-field",{attrs:{error:e.$v.usersModel.confirmPassword.$error,"error-messages":e.usersModel.password!==e.usersModel.confirmPassword?e.$t("Dashboard.repeat_password_text"):"","append-icon":e.confirmPasswordShow?"mdi-eye":"mdi-eye-off",type:e.confirmPasswordShow?"text":"password",readonly:"Read"===e.TYPE,maxlength:"20",outlined:""},on:{"click:append":function(s){e.confirmPasswordShow=!e.confirmPasswordShow}},model:{value:e.$v.usersModel.confirmPassword.$model,callback:function(s){e.$set(e.$v.usersModel.confirmPassword,"$model",s)},expression:"$v.usersModel.confirmPassword.$model"}})],1)])]:e._e()],2)],1),t("div",{staticClass:"mt-8"},[t("go-back-button"),"Create"===e.TYPE?[t("send-button",{attrs:{text:e.$t("Dashboard.create")},on:{"emit:up":e.send}})]:"Update"===e.TYPE?[t("send-button",{attrs:{text:e.$t("Dashboard.update")},on:{"emit:up":e.update}})]:e._e()],2)])])],1)},o=[],a=t("87d8"),l=t("0130"),d=t("9e43"),i=t("b5ae"),n=t("0a35"),u={name:"UserForm",props:{TYPE:{type:String,default:""}},components:{AppCard:a["a"],SendButton:l["a"],GoBackButton:d["a"],ChevronDownIcon:n["e"]},data(){return{passwordShow:!1,confirmPasswordShow:!1,usersModel:{username:"",first_name:"",last_name:"",role:"",company:null,password:"",is_deleted:!1,is_active:!0,confirmPassword:""},rolesList:[],filialList:[]}},validations:{usersModel:{username:{required:i["required"]},first_name:{required:i["required"]},last_name:{required:i["required"]},role:{required:i["required"]},company:{required:i["required"]},password:{minLength:Object(i["minLength"])(6),required(e){return"Update"===this.TYPE||Object(i["required"])(e)}},confirmPassword:{minLength:Object(i["minLength"])(6),required(e){return"Update"===this.TYPE||Object(i["required"])(e)},sameAsPassword:Object(i["sameAs"])((function(e){return this.usersModel.password}))}}},mounted(){this.$route.params.id&&this.getOne(),this.roleList(),this.getFilialList()},methods:{send(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):(this.usersModel.username=this.usersModel.username.toLowerCase(),this.$http.post(`/${this.$store.state.auth.COMPANY_ID}/employee/`,this.usersModel).then(e=>{this.$toast.success("Yaratildi"),setTimeout(()=>{this.$router.push({name:"OtherSectionUsersList"})},1500)}).catch(e=>{this.$toast.error("Yaratishda xatolik")}))},update(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):("Update"===this.TYPE&&(delete this.usersModel.password,delete this.usersModel.confirmPassword),this.usersModel.username=this.usersModel.username.toLowerCase(),this.$http.put(`/${this.$store.state.auth.COMPANY_ID}/employee/${this.$route.params.id}/`,this.usersModel).then(e=>{this.$toast.success("Yangilandi"),setTimeout(()=>{this.$router.push({name:"OtherSectionUsersList"})},1500)}).catch(e=>{this.$toast.error("Yangilashda xatolik")}))},getOne(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/employee/${this.$route.params.id}/`).then(({data:e})=>{this.usersModel.username=e.username,this.usersModel.first_name=e.first_name,this.usersModel.last_name=e.last_name,this.usersModel.role=e.role,this.usersModel.company=e.company})},roleList(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/employee/roles/`).then(({data:e})=>{this.rolesList=e.choices})},getFilialList(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/filial/`,{params:{page_size:500}}).then(({data:e})=>{const s=e.results.filter(e=>"filial"===e.type||"head_office"===e.type);this.filialList=s})}}},m=u,c=t("0c7c"),p=Object(c["a"])(m,r,o,!1,null,null,null);s["a"]=p.exports},cc0e:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("user-form",{attrs:{TYPE:e.$store.state.FORM_TYPE.UPDATE}})},o=[],a=t("0e14"),l={name:"Update",components:{UserForm:a["a"]}},d=l,i=t("0c7c"),n=Object(i["a"])(d,r,o,!1,null,null,null);s["default"]=n.exports}}]);
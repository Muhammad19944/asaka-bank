(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-595501dc"],{3408:function(t,a,e){},"5a51":function(t,a,e){"use strict";e("3408")},b858:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("application-form",{attrs:{TYPE:t.$store.state.FORM_TYPE.READ}})},l=[],s=e("f38b"),o={name:"index",components:{ApplicationForm:s["a"]}},n=o,p=e("0c7c"),d=Object(p["a"])(n,i,l,!1,null,"d409c65a",null);a["default"]=d.exports},e751:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(" "+t._s(t.label)+" "),t.subLabel?[e("span",{staticClass:"red--text"},[t._v("("+t._s(t.subLabel)+")")])]:t._e()],2),e("v-file-input",{staticClass:"file-uploader",attrs:{disabled:t.disabled,"prepend-icon":"",accept:"image/png, image/jpeg, image/jpg, image/bmp",outlined:"","hide-details":"",multiple:""},on:{change:t.upload},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-btn",{staticStyle:{"margin-top":"-6px"},attrs:{disabled:t.isLoading,depressed:"",loading:t.isLoading,color:"rgba(var(--primary), 1)"}},[e("span",{staticClass:"text-transform-reset text-white"},[t._v(t._s(t.$t("Dashboard.upload_file")))])])]},proxy:!0}]),model:{value:t.file,callback:function(a){t.file=a},expression:"file"}}),t.fileList.length?e("div",{staticClass:"upload-wrap d-flex flex-wrap mt-1 mx-n1"},[t._l(t.fileList,(function(a){return[e("div",{staticClass:"file-upload-wrap rounded overflow-hidden p-relative ma-1"},[e("a",{staticClass:"border-all d-flex align-center justify-center w-100 h-100 rounded"},[e("file-text-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})],1),e("div",{staticClass:"file-upload-actions p-absolute w-100 h-100 d-flex align-center justify-space-around px-2 transition-ease-in-out"},[e("a",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",class:t.disabled?"disableClick":"",attrs:{href:t.$http.defaults.baseURL+a.url,download:t.$http.defaults.baseURL+a.url,target:"_blank",rel:"noopener noreferrer"}},[e("eye-icon",{staticClass:"text-white d-block",attrs:{size:"1.2x"}})],1)])])]}))],2):t._e()],1)},l=[],s=e("0a35"),o={name:"MultipleFileUpload",props:{label:{type:String},subLabel:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},components:{EyeIcon:s["n"],Trash2Icon:s["M"],FileTextIcon:s["q"],DownloadIcon:s["k"]},data(){return{file:[],fileList:[],isLoading:!1}},watch:{value(t){this.fileList=t}},methods:{upload(t){this.isLoading=!0;let a=new FormData;for(let e=0;e<t.length;e++){let i=t[e];a.append("file",i)}this.$http.post("/multiple_upload/",a).then(({data:t})=>{this.$toast.success("Rasm yuklandi"),this.$emit("emit:up",t),this.isLoading=!1,this.fileList=t}).catch(t=>{this.$t("Dashboard.e")})},download(){}}},n=o,p=(e("5a51"),e("0c7c")),d=Object(p["a"])(n,i,l,!1,null,null,null);a["a"]=d.exports},f38b:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"application-form-view"},[e("app-card",[e("div",{staticClass:"form-wrap pa-5 px-6"},[e("div",{staticClass:"d-flex align-center mb-8"},[e("h4",{staticClass:"text--primary text-uppercase font-700 mr-4"},[t._v("Ko'rish")]),e("v-divider",{staticStyle:{"border-color":"rgb(var(--border-color), 1)"}})],1),e("div",{staticClass:"app-collapse--advanced mb-10"},[e("v-expansion-panels",{staticClass:"border-all",attrs:{accordion:"",multiple:""},model:{value:t.panel,callback:function(a){t.panel=a},expression:"panel"}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"py-5 font-600 reset-size"},[t._v(" Mijozga yuborish ")]),e("v-expansion-panel-content",[e("div",{staticClass:"form-wrap-body"},[e("v-row",[t.applicationModel.is_completed?[e("v-col",{attrs:{md:"12"}},[e("v-alert",{attrs:{type:"error"}},[t._v(" Mijoz bilan murojaat yakunlangan")])],1)]:t._e(),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("F.I.O")]),e("v-text-field",{attrs:{readonly:"",outlined:"","hide-details":""},model:{value:t.applicationModel.full_name,callback:function(a){t.$set(t.applicationModel,"full_name",a)},expression:"applicationModel.full_name"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Telefon")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.phone,callback:function(a){t.$set(t.applicationModel,"phone",a)},expression:"applicationModel.phone"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("E-mail")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.email,callback:function(a){t.$set(t.applicationModel,"email",a)},expression:"applicationModel.email"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("STIR")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.tax_inn,callback:function(a){t.$set(t.applicationModel,"tax_inn",a)},expression:"applicationModel.tax_inn"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Karta")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.debit_card&&t.applicationModel.debit_card.name_uz,callback:function(a){t.$set(t.applicationModel.debit_card&&t.applicationModel.debit_card,"name_uz",a)},expression:"\n                                                        applicationModel.debit_card &&\n                                                        applicationModel.debit_card.name_uz\n                                                    "}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Viloyat")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.district&&t.applicationModel.district.name_uz,callback:function(a){t.$set(t.applicationModel.district&&t.applicationModel.district,"name_uz",a)},expression:"\n                                                        applicationModel.district && applicationModel.district.name_uz\n                                                    "}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Filial")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.filial&&t.applicationModel.filial.name_uz,callback:function(a){t.$set(t.applicationModel.filial&&t.applicationModel.filial,"name_uz",a)},expression:"applicationModel.filial && applicationModel.filial.name_uz"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Status")]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.status&&t.applicationModel.status.name_uz,callback:function(a){t.$set(t.applicationModel.status&&t.applicationModel.status,"name_uz",a)},expression:"applicationModel.status && applicationModel.status.name_uz"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Statusni o'zgartirish")]),e("v-select",{attrs:{items:t.statusList,readonly:t.applicationModel.is_completed,"item-text":"name_uz","item-value":"id",outlined:"","hide-details":""},on:{change:t.changeStatus},scopedSlots:t._u([{key:"append",fn:function(){return[e("chevron-down-icon",{staticClass:"text-secondary-dark",attrs:{size:"1.35x"}})]},proxy:!0}])})],1)]),t.applicationModel.passport?[e("v-col",{attrs:{md:"4"}},[e("multiple-file-upload",{attrs:{value:t.passportFile,label:"Pasport",disabled:""}})],1)]:[e("v-col",{attrs:{md:"4"}})],t.applicationModel.individual_card_design?[e("v-col",{attrs:{md:"4"}},[e("multiple-file-upload",{attrs:{value:t.individualDesignFile,label:"Individual karta dizayn rasmi",disabled:""}})],1)]:[e("v-col",{attrs:{md:"4"}})],e("v-col",{attrs:{md:"4"}}),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Mijozdan kelgan xabar")]),e("v-textarea",{attrs:{outlined:"",readonly:"","hide-details":"","no-resize":""},model:{value:t.applicationModel.text,callback:function(a){t.$set(t.applicationModel,"text",a)},expression:"applicationModel.text"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Mijozga xabar yozish")]),e("v-textarea",{attrs:{error:t.$v.applicationRequestModel.text.$error,readonly:t.applicationModel.is_completed,outlined:"","hide-details":"","no-resize":""},model:{value:t.$v.applicationRequestModel.text.$model,callback:function(a){t.$set(t.$v.applicationRequestModel.text,"$model",a)},expression:"$v.applicationRequestModel.text.$model"}})],1)]),e("v-col",{attrs:{md:"12"}},[e("go-back-button"),t.applicationModel.is_completed?t._e():[e("send-button",{on:{"emit:up":t.send}})]],2)],2)],1)])],1),e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"py-5 font-600 reset-size"},[t._v(" Filialga yuborish ")]),e("v-expansion-panel-content",[e("div",{staticClass:"form-wrap-body"},[e("v-row",[e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("Filial")]),e("v-select",{attrs:{items:t.filialList,readonly:t.applicationModel.is_completed,"item-text":"name_uz","item-value":"id",outlined:"","hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e("chevron-down-icon",{staticClass:"text-secondary-dark",attrs:{size:"1.35x"}})]},proxy:!0}]),model:{value:t.selectFilial,callback:function(a){t.selectFilial=a},expression:"selectFilial"}})],1)]),e("v-col",{attrs:{md:"12"}},[e("go-back-button"),t.applicationModel.is_completed?t._e():[e("send-button",{on:{"emit:up":t.moveToFilial}})]],2)],1)],1)])],1)],1)],1)])])],1)},l=[],s=e("87d8"),o=e("0130"),n=e("9e43"),p=e("e751"),d=e("0a35"),r=e("b5ae"),c={name:"ApplicationForm",props:{TYPE:{type:String,default:""}},components:{AppCard:s["a"],SendButton:o["a"],GoBackButton:n["a"],MultipleFileUpload:p["a"],FileTextIcon:d["q"],ChevronDownIcon:d["e"]},data(){return{passportFile:[],individualDesignFile:[],applicationModel:{},statusList:[],filialList:[],selectFilial:"",panel:[0],applicationRequestModel:{application:+this.$route.params.id,text:"",file:null}}},validations:{applicationRequestModel:{text:{required:r["required"]}}},mounted(){this.getOne(),this.getStatusList(),this.getFilialList()},methods:{getOne(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/plastic_card/application/action/${this.$route.params.id}/`).then(({data:t})=>{this.applicationModel=t,this.applicationRequestModel.text=t.application_outcome.text,this.passportFile.push(this.applicationModel.passport),this.individualDesignFile.push(this.applicationModel.individual_card_design)})},getStatusList(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/status/`).then(({data:t})=>{this.statusList=t.results})},changeStatus(t){this.$http.put(`/${this.$store.state.auth.COMPANY_ID}/plastic_card/application/action/${this.$route.params.id}/`,{status:t}).then(()=>{this.$toast.success("Status o'zgartirildi")}).catch(()=>{this.$toast.error("O'zgartirishda xatolik")})},getFilialList(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/filial/`).then(({data:t})=>{this.filialList=t.results})},moveToFilial(){this.$http.put(`/${this.$store.state.auth.COMPANY_ID}/plastic_card/application/action/${this.$route.params.id}/transfer_to_filial/${this.selectFilial}/`).then(()=>{this.$toast.success("Filialga yuborildi"),setTimeout(()=>{this.$router.push({name:"AdminCorporateApplicationsList"})},1e3)}).catch(()=>{this.$toast.error("Yuborishda xatolik")})},send(){this.$v.$touch(),this.$v.$invalid||this.$http.post(`/${this.$store.state.auth.COMPANY_ID}/application/result/`,this.applicationRequestModel).then(()=>{this.$toast.success("Murojat mijozga yuborildi"),setTimeout(()=>{this.$router.push({name:"AdminCorporateApplicationsList"})},1500)}).catch(t=>{this.$toast.error(t.data.join())})}}},u=c,m=e("0c7c"),h=Object(m["a"])(u,i,l,!1,null,null,null);a["a"]=h.exports}}]);
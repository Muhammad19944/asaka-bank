(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a115912"],{"5cd7":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("promotion-form",{attrs:{TYPE:t.$store.state.FORM_TYPE.CREATE}})},i=[],s=a("a5a8"),l={name:"Create",components:{PromotionForm:s["a"]}},n=l,r=a("0c7c"),d=Object(r["a"])(n,o,i,!1,null,null,null);e["default"]=d.exports},"8d9d":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(" "+t._s(t.label)+" "),t.subLabel?[a("span",{staticClass:"red--text"},[t._v("("+t._s(t.subLabel)+")")])]:t._e()],2),a("div",{staticClass:"d-flex align-center"},[a("v-file-input",{staticClass:"file-uploader mr-2",attrs:{disabled:t.disabled||t.readonly,"prepend-icon":"",accept:"image/png, image/jpeg, image/jpg, image/bmp",outlined:"","hide-details":""},on:{change:t.upload},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{staticStyle:{"margin-top":"-6px"},attrs:{depressed:"",color:"rgba(var(--primary), 1)"}},[a("span",{staticClass:"text-transform-reset text-white"},[t._v(t._s(t.$t("Dashboard.upload_file")))])])]},proxy:!0}]),model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t.value?[a("span",{staticClass:"d-none"},[t._v(t._s(t.hidden))]),t.fileThumb.visible?[a("div",{staticClass:"file-upload-wrap rounded overflow-hidden p-relative"},[t.extension?[a("a",{staticClass:"border-all d-flex align-center justify-center w-100 h-100 rounded",attrs:{href:"#"}},[a("file-text-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})],1)]:[a("img",{staticClass:"d-block img-cover",attrs:{src:t.$http.defaults.baseURL+t.fileThumb.url,alt:"Card image"}})],a("div",{staticClass:"file-upload-actions p-absolute w-100 h-100 d-flex align-center justify-space-around px-2 transition-ease-in-out"},[a("a",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{href:t.$http.defaults.baseURL+t.fileThumb.url,download:"",target:"_blank",rel:"noopener noreferrer"}},[a("download-icon",{staticClass:"text-white d-block",attrs:{size:"1.2x"}})],1),t.readonly?t._e():[a("button",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{type:"button"},on:{click:t.deleteFile}},[a("trash2-icon",{staticClass:"text-white d-block",attrs:{size:"1.1x"}})],1)]],2)],2)]:t._e()]:t._e()],2)])},i=[],s=a("0a35"),l={name:"FileUpload",props:{label:{type:String},subLabel:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},components:{EyeIcon:s["n"],Trash2Icon:s["M"],FileTextIcon:s["q"],DownloadIcon:s["k"]},computed:{extension(){return["pdf","PDF","doc","docx","DOC","csv","CSV","xls","XLS"].includes(this.fileThumb.url.slice(-3))},hidden(){return{url:this.fileThumb.url=this.value.url,visible:this.fileThumb.visible=!0}}},watch:{value(t){t&&(this.fileThumb.visible=!0,this.fileThumb.url=t.url)}},data(){return{template:"",file:[],fileThumb:{url:"",visible:!1},fileList:[]}},methods:{upload(t){let e=new FormData;e.append("file",t),this.$http.post("/upload/",e).then(({data:t})=>{this.$toast.success("Rasm yuklandi"),this.$emit("emit:up",t),this.fileThumb.url=t.url,this.fileThumb.visible=!0}).catch(()=>this.$t("Dashboard.e"))},deleteFile(t){confirm(this.$t("Dashboard.d"))&&(this.fileThumb.visible=!1,this.fileThumb.url="",this.file=[])}}},n=l,r=a("0c7c"),d=Object(r["a"])(n,o,i,!1,null,null,null);e["a"]=d.exports},a5a8:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category-form-view"},[a("app-card",[a("div",{staticClass:"form-wrap pa-5 px-6"},[a("div",{staticClass:"d-flex align-center mb-8"},[a("h4",{staticClass:"text--primary text-uppercase font-700 mr-4"},[t._v(" "+t._s("Create"===t.TYPE?t.$t("Dashboard.add_new"):"Update"===t.TYPE?t.$t("Dashboard.update"):t.$t("Dashboard.read"))+" ")]),a("v-divider",{staticStyle:{"border-color":"rgb(var(--border-color), 1)"}})],1),a("div",{staticClass:"flex-1"},[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("title_uz (UZ)")]),a("v-text-field",{attrs:{error:t.$v.promotionModel.title_uz.$error,readonly:"Read"===t.TYPE,outlined:"","hide-details":""},model:{value:t.$v.promotionModel.title_uz.$model,callback:function(e){t.$set(t.$v.promotionModel.title_uz,"$model",e)},expression:"$v.promotionModel.title_uz.$model"}})],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("title_ru (RU)")]),a("v-text-field",{attrs:{error:t.$v.promotionModel.title_ru.$error,readonly:"Read"===t.TYPE,outlined:"","hide-details":""},model:{value:t.$v.promotionModel.title_ru.$model,callback:function(e){t.$set(t.$v.promotionModel.title_ru,"$model",e)},expression:"$v.promotionModel.title_ru.$model"}})],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("title_en (EN)")]),a("v-text-field",{attrs:{error:t.$v.promotionModel.title_en.$error,readonly:"Read"===t.TYPE,outlined:"","hide-details":""},model:{value:t.$v.promotionModel.title_en.$model,callback:function(e){t.$set(t.$v.promotionModel.title_en,"$model",e)},expression:"$v.promotionModel.title_en.$model"}})],1)]),a("v-col",{attrs:{md:"12"}},[a("div",{staticClass:"admin-tabs"},[a("v-tabs",{staticClass:"mb-0 mb-5",attrs:{height:"56","hide-slider":""},model:{value:t.tab3,callback:function(e){t.tab3=e},expression:"tab3"}},[a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" main_description_uz "),a("span",{staticClass:"font-700 text-small"},[t._v("(UZ)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" main_description_ru "),a("span",{staticClass:"font-700 text-small"},[t._v("(RU)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" main_description_en "),a("span",{staticClass:"font-700 text-small"},[t._v("(EN)")])])])],1),a("v-tabs-items",{model:{value:t.tab3,callback:function(e){t.tab3=e},expression:"tab3"}},[a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.main_description_uz,callback:function(e){t.$set(t.promotionModel,"main_description_uz",e)},expression:"promotionModel.main_description_uz"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.main_description_ru,callback:function(e){t.$set(t.promotionModel,"main_description_ru",e)},expression:"promotionModel.main_description_ru"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.main_description_en,callback:function(e){t.$set(t.promotionModel,"main_description_en",e)},expression:"promotionModel.main_description_en"}})],1)])],1)],1)]),a("v-col",{attrs:{md:"12"}},[a("div",{staticClass:"admin-tabs"},[a("v-tabs",{staticClass:"mb-0 mb-5",attrs:{height:"56","hide-slider":""},model:{value:t.tab1,callback:function(e){t.tab1=e},expression:"tab1"}},[a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" description_uz "),a("span",{staticClass:"font-700 text-small"},[t._v("(UZ)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" description_ru "),a("span",{staticClass:"font-700 text-small"},[t._v("(RU)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" description_en "),a("span",{staticClass:"font-700 text-small"},[t._v("(EN)")])])])],1),a("v-tabs-items",{model:{value:t.tab1,callback:function(e){t.tab1=e},expression:"tab1"}},[a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.description_uz,callback:function(e){t.$set(t.promotionModel,"description_uz",e)},expression:"promotionModel.description_uz"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.description_ru,callback:function(e){t.$set(t.promotionModel,"description_ru",e)},expression:"promotionModel.description_ru"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.description_en,callback:function(e){t.$set(t.promotionModel,"description_en",e)},expression:"promotionModel.description_en"}})],1)])],1)],1)]),a("v-col",{attrs:{md:"12"}},[a("div",{staticClass:"admin-tabs"},[a("v-tabs",{staticClass:"mb-0 mb-5",attrs:{height:"56","hide-slider":""},model:{value:t.tab2,callback:function(e){t.tab2=e},expression:"tab2"}},[a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" schedule_uz "),a("span",{staticClass:"font-700 text-small"},[t._v("(UZ)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" schedule_ru "),a("span",{staticClass:"font-700 text-small"},[t._v("(RU)")])])]),a("v-tab",{staticClass:"transition-ease-in-out"},[a("h5",{staticClass:"font-600 dark-text text-transform-reset no-spacing px-2"},[t._v(" schedule_en "),a("span",{staticClass:"font-700 text-small"},[t._v("(EN)")])])])],1),a("v-tabs-items",{model:{value:t.tab2,callback:function(e){t.tab2=e},expression:"tab2"}},[a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.schedule_uz,callback:function(e){t.$set(t.promotionModel,"schedule_uz",e)},expression:"promotionModel.schedule_uz"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.schedule_ru,callback:function(e){t.$set(t.promotionModel,"schedule_ru",e)},expression:"promotionModel.schedule_ru"}})],1)]),a("v-tab-item",[a("div",{staticClass:"app-editor"},[a("quill-editor",{attrs:{disabled:"Read"===t.TYPE},model:{value:t.promotionModel.schedule_en,callback:function(e){t.$set(t.promotionModel,"schedule_en",e)},expression:"promotionModel.schedule_en"}})],1)])],1)],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("start date")]),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"Start date","append-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":""},model:{value:t.promotionModel.start_date,callback:function(e){t.$set(t.promotionModel,"start_date",e)},expression:"promotionModel.start_date"}},"v-text-field",i,!1),o))]}}]),model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[a("v-date-picker",{on:{input:function(e){t.startDate=!1}},model:{value:t.promotionModel.start_date,callback:function(e){t.$set(t.promotionModel,"start_date",e)},expression:"promotionModel.start_date"}})],1)],1)]),a("v-col",{attrs:{md:"4"}},[a("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[a("h5",{staticClass:"font-600 dark-text mb-1"},[t._v("end date")]),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"End date","append-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":""},model:{value:t.promotionModel.end_date,callback:function(e){t.$set(t.promotionModel,"end_date",e)},expression:"promotionModel.end_date"}},"v-text-field",i,!1),o))]}}]),model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},[a("v-date-picker",{on:{input:function(e){t.endDate=!1}},model:{value:t.promotionModel.end_date,callback:function(e){t.$set(t.promotionModel,"end_date",e)},expression:"promotionModel.end_date"}})],1)],1)]),a("v-col",{attrs:{md:"4"}},[a("file-upload",{attrs:{label:t.$t("Dashboard.upload_file"),value:t.fileUpload,disabled:"Read"===t.TYPE},on:{"emit:up":t.upload}})],1),a("v-col",{attrs:{md:"4"}},[a("file-upload",{attrs:{label:t.$t("Dashboard.upload_photo"),value:t.imageUpload,disabled:"Read"===t.TYPE},on:{"emit:up":t.uploadImage}})],1)],1)],1),a("div",{staticClass:"mt-8"},[a("go-back-button"),"Create"===t.TYPE?[a("send-button",{attrs:{text:t.$t("Dashboard.create")},on:{"emit:up":t.send}})]:"Update"===t.TYPE?[a("send-button",{attrs:{text:t.$t("Dashboard.update")},on:{"emit:up":t.update}})]:t._e()],2)])])],1)},i=[],s=a("87d8"),l=a("0130"),n=a("9e43"),r=a("8d9d"),d=a("b5ae"),c={name:"PromotionForm",props:{TYPE:{type:String,default:""}},components:{AppCard:s["a"],SendButton:l["a"],GoBackButton:n["a"],FileUpload:r["a"]},data(){return{fileUpload:null,imageUpload:null,tab1:null,tab2:null,tab3:null,startDate:!1,endDate:!1,promotionModel:{title_uz:"",title_ru:"",title_en:"",description_uz:"",description_ru:"",description_en:"",schedule_uz:"",schedule_ru:"",schedule_en:"",file:null,start_date:"",end_date:"",main_description_uz:"",main_description_ru:"",main_description_en:"",image:null}}},validations:{promotionModel:{title_uz:{required:d["required"]},title_ru:{required:d["required"]},title_en:{required:d["required"]}}},mounted(){this.$route.params.id&&this.getOne()},methods:{send(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):(this.promotionModel.file=this.fileUpload.id,this.promotionModel.image=this.imageUpload.id,this.$http.post(`/${this.$store.state.auth.COMPANY_ID}/promotion/`,this.promotionModel).then(t=>{this.$toast.success("Yaratildi"),setTimeout(()=>{this.$router.push({name:"DashboardPromotionList"})},1500)}).catch(t=>{this.$toast.error("Yaratishda xatolik"),this.resetFields()}))},update(){this.$v.$touch(),this.$v.$invalid?this.$toast.warning("Field to'ldirilishi shart"):(this.promotionModel.file=this.fileUpload.id,this.promotionModel.image=this.imageUpload.id,this.$http.put(`/${this.$store.state.auth.COMPANY_ID}/promotion/${this.$route.params.id}/`,this.promotionModel).then(t=>{this.$toast.success("Yangilandi"),setTimeout(()=>{this.$router.push({name:"DashboardPromotionList"})},1500)}).catch(t=>{this.$toast.error("Yangilashda xatolik"),this.resetFields()}))},getOne(){this.$http.get(`/${this.$store.state.auth.COMPANY_ID}/promotion/${this.$route.params.id}/`).then(({data:t})=>{this.promotionModel=t,this.fileUpload=t.file,this.imageUpload=t.image})},upload(t){this.fileUpload=t},uploadImage(t){this.imageUpload=t}}},p=c,u=a("0c7c"),m=Object(u["a"])(p,o,i,!1,null,null,null);e["a"]=m.exports}}]);
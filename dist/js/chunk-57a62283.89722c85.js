(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57a62283"],{"1a8d":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"application-form-view"},[e("app-card",[e("div",{staticClass:"form-wrap pa-5 px-6"},[e("div",{staticClass:"d-flex align-center mb-8"},[e("h4",{staticClass:"text--primary text-uppercase font-700 mr-4"},[t._v(t._s(t.$t("Dashboard.read")))]),e("v-divider",{staticStyle:{"border-color":"rgb(var(--border-color), 1)"}})],1),e("div",{staticClass:"app-collapse--advanced mb-10"},[e("v-expansion-panels",{staticClass:"border-all",attrs:{accordion:"",multiple:""},model:{value:t.panel,callback:function(a){t.panel=a},expression:"panel"}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"py-5 font-600 reset-size"},[t._v(" Mijozga yuborish ")]),e("v-expansion-panel-content",[e("div",{staticClass:"form-wrap-body"},[e("v-row",[t.applicationModel.is_completed?[e("v-col",{attrs:{md:"12"}},[e("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.$t("LastCorrections.endConversation")))])],1)]:t._e(),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Dashboard.AboutBank.fio")))]),e("v-text-field",{attrs:{readonly:"",outlined:"","hide-details":""},model:{value:t.applicationModel.full_name,callback:function(a){t.$set(t.applicationModel,"full_name",a)},expression:"applicationModel.full_name"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Services.OpenCard.phone")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.phone,callback:function(a){t.$set(t.applicationModel,"phone",a)},expression:"applicationModel.phone"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Dashboard.AboutBank.email")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.email,callback:function(a){t.$set(t.applicationModel,"email",a)},expression:"applicationModel.email"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Services.OpenCard.stir")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.zip_code,callback:function(a){t.$set(t.applicationModel,"zip_code",a)},expression:"applicationModel.zip_code"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Dashboard.region.name")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.district&&t.applicationModel.district.name_uz,callback:function(a){t.$set(t.applicationModel.district&&t.applicationModel.district,"name_uz",a)},expression:"\n                                                        applicationModel.district && applicationModel.district.name_uz\n                                                    "}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Dashboard.branch.name")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.filial&&t.applicationModel.filial.name_uz,callback:function(a){t.$set(t.applicationModel.filial&&t.applicationModel.filial,"name_uz",a)},expression:"applicationModel.filial && applicationModel.filial.name_uz"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("LastCorrections.status")))]),e("v-text-field",{attrs:{outlined:"",readonly:"","hide-details":""},model:{value:t.applicationModel.status&&t.applicationModel.status.name_uz,callback:function(a){t.$set(t.applicationModel.status&&t.applicationModel.status,"name_uz",a)},expression:"applicationModel.status && applicationModel.status.name_uz"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("LastCorrections.changeStatus")))]),e("v-select",{attrs:{items:t.statusList,readonly:t.applicationModel.is_completed,"item-text":"name_uz","item-value":"id",outlined:"","hide-details":""},on:{change:t.changeStatus},scopedSlots:t._u([{key:"append",fn:function(){return[e("chevron-down-icon",{staticClass:"text-secondary-dark",attrs:{size:"1.35x"}})]},proxy:!0}])})],1)]),t.applicationModel.file?[e("v-col",{attrs:{md:"4"}},[e("file-upload",{ref:"propFile",attrs:{value:t.passportFile,readonly:"",label:"Pasport nusxasi"}})],1)]:[e("v-col",{attrs:{md:"4"}})],e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("LastCorrections.fromCustomer")))]),e("v-textarea",{attrs:{outlined:"",readonly:"","hide-details":"","no-resize":""},model:{value:t.applicationModel.text,callback:function(a){t.$set(t.applicationModel,"text",a)},expression:"applicationModel.text"}})],1)]),e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("LastCorrections.toCustomer")))]),e("v-textarea",{attrs:{error:t.$v.applicationRequestModel.text.$error,readonly:t.applicationModel.is_completed,outlined:"","hide-details":"","no-resize":""},model:{value:t.$v.applicationRequestModel.text.$model,callback:function(a){t.$set(t.$v.applicationRequestModel.text,"$model",a)},expression:"$v.applicationRequestModel.text.$model"}})],1)]),e("v-col",{attrs:{md:"4"}}),e("v-col",{attrs:{md:"12"}},[e("go-back-button"),t.applicationModel.is_completed?t._e():[e("send-button",{on:{"emit:up":t.send}})]],2)],2)],1)])],1),e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"py-5 font-600 reset-size"},[t._v(" "+t._s(t.$t("LastCorrections.toFilial"))+" ")]),e("v-expansion-panel-content",[e("div",{staticClass:"form-wrap-body"},[e("v-row",[e("v-col",{attrs:{md:"4"}},[e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(t._s(t.$t("Dashboard.branch.name")))]),e("v-select",{attrs:{items:t.filialList,readonly:t.applicationModel.is_completed,"item-text":"name_uz","item-value":"id",outlined:"","hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e("chevron-down-icon",{staticClass:"text-secondary-dark",attrs:{size:"1.35x"}})]},proxy:!0}]),model:{value:t.selectFilial,callback:function(a){t.selectFilial=a},expression:"selectFilial"}})],1)]),e("v-col",{attrs:{md:"12"}},[e("go-back-button"),t.applicationModel.is_completed?t._e():[e("send-button",{on:{"emit:up":t.moveToFilial}})]],2)],1)],1)])],1)],1)],1)])])],1)},s=[],l=e("87d8"),o=e("9e43"),n=e("0130"),r=e("e751"),d=e("8d9d"),p=e("0a35"),c=e("b5ae"),u={name:"Read",components:{AppCard:l["a"],GoBackButton:o["a"],SendButton:n["a"],MultipleFileUpload:r["a"],FileUpload:d["a"],ChevronDownIcon:p["e"]},data(){return{panel:[0],selectFilial:"",filialList:[],passportFile:null,statusList:[],applicationModel:{full_name:"",phone:"",email:"",zip_code:"",address:"",file:null,district:null,filial:null,appeal_type:null,text:""},applicationRequestModel:{application:+this.$route.params.id,text:"",file:null}}},validations:{applicationRequestModel:{text:{required:c["required"]}}},mounted(){this.getOne(),this.getFilialList(),this.getStatusList()},methods:{getOne(){this.$http.get(`/8/appeal/action/${this.$route.params.id}/`).then(({data:t})=>{this.applicationModel=t,this.applicationRequestModel.text=t.application_outcome.text,this.passportFile=this.applicationModel.file})},getFilialList(){this.$http.get("/1/filial/").then(({data:t})=>{this.filialList=t.results})},changeStatus(t){this.$http.put(`/1/appeal/action/${this.$route.params.id}/`,{status:t}).then(()=>{this.$toast.success("Status o'zgartirildi")}).catch(()=>{this.$toast.error("O'zgartirishda xatolik")})},getStatusList(){this.$http.get("/1/status/").then(({data:t})=>{this.statusList=t.results})},moveToFilial(){this.$http.put(`/8/appeal/action/${this.$route.params.id}/transfer_to_filial/${this.selectFilial}/`).then(()=>{this.$toast.success("Filialga yuborildi"),setTimeout(()=>{this.$router.push({name:"FeedbackAppealList"})},1e3)}).catch(()=>{this.$toast.error("Yuborishda xatolik")})},send(){this.$v.$touch(),this.$v.$invalid||this.$http.post("/8/application/result/",this.applicationRequestModel).then(()=>{this.$toast.success("Murojat mijozga yuborildi"),setTimeout(()=>{this.$router.push({name:"FeedbackAppealList"})},1500)}).catch(t=>{this.$toast.error(t.data.join())})}}},m=u,h=e("0c7c"),f=Object(h["a"])(m,i,s,!1,null,null,null);a["default"]=f.exports},3408:function(t,a,e){},"5a51":function(t,a,e){"use strict";e("3408")},"8d9d":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(" "+t._s(t.label)+" "),t.subLabel?[e("span",{staticClass:"red--text"},[t._v("("+t._s(t.subLabel)+")")])]:t._e()],2),e("div",{staticClass:"d-flex align-center"},[e("v-file-input",{staticClass:"file-uploader mr-2",attrs:{disabled:t.disabled||t.readonly,"prepend-icon":"",accept:"image/png, image/jpeg, image/jpg, image/bmp",outlined:"","hide-details":""},on:{change:t.upload},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-btn",{staticStyle:{"margin-top":"-6px"},attrs:{depressed:"",color:"rgba(var(--primary), 1)"}},[e("span",{staticClass:"text-transform-reset text-white"},[t._v(t._s(t.$t("Dashboard.upload_file")))])])]},proxy:!0}]),model:{value:t.file,callback:function(a){t.file=a},expression:"file"}}),t.value?[e("span",{staticClass:"d-none"},[t._v(t._s(t.hidden))]),t.fileThumb.visible?[e("div",{staticClass:"file-upload-wrap rounded overflow-hidden p-relative"},[t.extension?[e("a",{staticClass:"border-all d-flex align-center justify-center w-100 h-100 rounded",attrs:{href:"#"}},[e("file-text-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})],1)]:[e("img",{staticClass:"d-block img-cover",attrs:{src:t.$http.defaults.baseURL+t.fileThumb.url,alt:"Card image"}})],e("div",{staticClass:"file-upload-actions p-absolute w-100 h-100 d-flex align-center justify-space-around px-2 transition-ease-in-out"},[e("a",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{href:t.$http.defaults.baseURL+t.fileThumb.url,download:"",target:"_blank",rel:"noopener noreferrer"}},[e("download-icon",{staticClass:"text-white d-block",attrs:{size:"1.2x"}})],1),t.readonly?t._e():[e("button",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",attrs:{type:"button"},on:{click:t.deleteFile}},[e("trash2-icon",{staticClass:"text-white d-block",attrs:{size:"1.1x"}})],1)]],2)],2)]:t._e()]:t._e()],2)])},s=[],l=e("0a35"),o={name:"FileUpload",props:{label:{type:String},subLabel:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},components:{EyeIcon:l["n"],Trash2Icon:l["M"],FileTextIcon:l["q"],DownloadIcon:l["k"]},computed:{extension(){return["pdf","PDF","doc","docx","DOC","csv","CSV","xls","XLS"].includes(this.fileThumb.url.slice(-3))},hidden(){return{url:this.fileThumb.url=this.value.url,visible:this.fileThumb.visible=!0}}},watch:{value(t){t&&(this.fileThumb.visible=!0,this.fileThumb.url=t.url)}},data(){return{template:"",file:[],fileThumb:{url:"",visible:!1},fileList:[]}},methods:{upload(t){let a=new FormData;a.append("file",t),this.$http.post("/upload/",a).then(({data:t})=>{this.$toast.success("Rasm yuklandi"),this.$emit("emit:up",t),this.fileThumb.url=t.url,this.fileThumb.visible=!0}).catch(()=>this.$t("Dashboard.e"))},deleteFile(t){confirm(this.$t("Dashboard.d"))&&(this.fileThumb.visible=!1,this.fileThumb.url="",this.file=[])}}},n=o,r=e("0c7c"),d=Object(r["a"])(n,i,s,!1,null,null,null);a["a"]=d.exports},e751:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-form-group app-form-group__small no-shadow mb-2"},[e("h5",{staticClass:"font-600 dark-text mb-1"},[t._v(" "+t._s(t.label)+" "),t.subLabel?[e("span",{staticClass:"red--text"},[t._v("("+t._s(t.subLabel)+")")])]:t._e()],2),e("v-file-input",{staticClass:"file-uploader",attrs:{disabled:t.disabled,"prepend-icon":"",accept:"image/png, image/jpeg, image/jpg, image/bmp",outlined:"","hide-details":"",multiple:""},on:{change:t.upload},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-btn",{staticStyle:{"margin-top":"-6px"},attrs:{disabled:t.isLoading,depressed:"",loading:t.isLoading,color:"rgba(var(--primary), 1)"}},[e("span",{staticClass:"text-transform-reset text-white"},[t._v(t._s(t.$t("Dashboard.upload_file")))])])]},proxy:!0}]),model:{value:t.file,callback:function(a){t.file=a},expression:"file"}}),t.fileList.length?e("div",{staticClass:"upload-wrap d-flex flex-wrap mt-1 mx-n1"},[t._l(t.fileList,(function(a){return[e("div",{staticClass:"file-upload-wrap rounded overflow-hidden p-relative ma-1"},[e("a",{staticClass:"border-all d-flex align-center justify-center w-100 h-100 rounded"},[e("file-text-icon",{staticClass:"grey--text",attrs:{size:"1.5x"}})],1),e("div",{staticClass:"file-upload-actions p-absolute w-100 h-100 d-flex align-center justify-space-around px-2 transition-ease-in-out"},[e("a",{staticClass:"rounded-circle d-flex align-center justify-center outline-transparent",class:t.disabled?"disableClick":"",attrs:{href:t.$http.defaults.baseURL+a.url,download:t.$http.defaults.baseURL+a.url,target:"_blank",rel:"noopener noreferrer"}},[e("eye-icon",{staticClass:"text-white d-block",attrs:{size:"1.2x"}})],1)])])]}))],2):t._e()],1)},s=[],l=e("0a35"),o={name:"MultipleFileUpload",props:{label:{type:String},subLabel:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},components:{EyeIcon:l["n"],Trash2Icon:l["M"],FileTextIcon:l["q"],DownloadIcon:l["k"]},data(){return{file:[],fileList:[],isLoading:!1}},watch:{value(t){this.fileList=t}},methods:{upload(t){this.isLoading=!0;let a=new FormData;for(let e=0;e<t.length;e++){let i=t[e];a.append("file",i)}this.$http.post("/multiple_upload/",a).then(({data:t})=>{this.$toast.success("Rasm yuklandi"),this.$emit("emit:up",t),this.isLoading=!1,this.fileList=t}).catch(t=>{this.$t("Dashboard.e")})},download(){}}},n=o,r=(e("5a51"),e("0c7c")),d=Object(r["a"])(n,i,s,!1,null,null,null);a["a"]=d.exports}}]);
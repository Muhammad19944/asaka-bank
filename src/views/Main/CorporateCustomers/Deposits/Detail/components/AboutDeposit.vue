<template>
    <div class="about-deposit-view">
        <v-container class="pa-0">
            <v-row>
                <v-col md='6'>
                    <template v-if='additionalDetails[0]'>
                        <h1 class='text-extra-large-4 font-700 dark-text mb-5'>
                            <span v-if='$i18n.locale === "en"' v-html='additionalDetails[0].property_title_en' />
                            <span v-if='$i18n.locale === "ru"' v-html='additionalDetails[0].property_title_ru' />
                            <span v-if='$i18n.locale === "uz"' v-html='additionalDetails[0].property_title_uz' />
                        </h1>

                        <p>
                            <span v-if='$i18n.locale === "en"' v-html='additionalDetails[0].description_en' />
                            <span v-if='$i18n.locale === "ru"' v-html='additionalDetails[0].description_ru' />
                            <span v-if='$i18n.locale === "uz"' v-html='additionalDetails[0].description_uz' />
                        </p>
                    </template>
                </v-col>

                <v-spacer style='min-height: 1px' />

                <v-col md='5'>
                    <v-responsive :aspect-ratio='16 / 9'>
                        <img :src="additionalDetails[0].property_image ? $http.defaults.baseURL + additionalDetails[0].property_image.url: ''" alt="Credit image" class="w-100 h-100 img-contain p-absolute"/>
                    </v-responsive>
                </v-col>
            </v-row>
        </v-container>

        <section class="section-service section mt-16">
            <v-container>
                <v-row>
                    <v-col md="4">
                        <router-link
                            :to="{ name: 'CreditCalc' }"
                            class="
                                app-slide-card
                                pa-8
                                mx-2
                                rounded-lg
                                overflow-hidden
                                d-flex
                                flex-column
                                text-decoration-none
                                p-relative
                            "
                        >
                            <svg id="icon-calc" viewBox="0 0 512.00003 512.00003">
                                <path
                                    d="m256 170.230469v60.585937c0 9.1875 7.4375 16.636719 16.621094 16.648438h188.589844c9.191406.007812 16.644531-7.4375 16.65625-16.628906v-60.585938c0-9.1875-7.4375-16.636719-16.625-16.648438h-188.585938c-9.191406-.007812-16.648438 7.4375-16.65625 16.628907zm204.800781 60.167969-187.734375.4375-.445312-60.167969 188.179687-.4375zm0 0"
                                ></path>
                                <path
                                    d="m307.199219 264.535156h-34.132813c-9.425781 0-17.066406 7.640625-17.066406 17.066406v25.597657c0 9.425781 7.640625 17.066406 17.066406 17.066406h34.132813c9.425781 0 17.066406-7.640625 17.066406-17.066406v-25.597657c0-9.425781-7.640625-17.066406-17.066406-17.066406zm-34.132813 42.664063v-25.597657h34.132813v25.597657zm0 0"
                                ></path>
                                <path
                                    d="m307.199219 341.332031h-34.132813c-9.425781 0-17.066406 7.640625-17.066406 17.066407v25.601562c0 9.425781 7.640625 17.066406 17.066406 17.066406h34.132813c9.425781 0 17.066406-7.640625 17.066406-17.066406v-25.601562c0-9.425782-7.640625-17.066407-17.066406-17.066407zm-34.132813 42.667969v-25.601562h34.132813v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m307.199219 418.132812h-34.132813c-9.425781 0-17.066406 7.640626-17.066406 17.066407v25.601562c0 9.425781 7.640625 17.066407 17.066406 17.066407h34.132813c9.425781 0 17.066406-7.640626 17.066406-17.066407v-25.601562c0-9.425781-7.640625-17.066407-17.066406-17.066407zm-34.132813 42.667969v-25.601562h34.132813v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m384 264.535156h-34.132812c-9.425782 0-17.066407 7.640625-17.066407 17.066406v25.597657c0 9.425781 7.640625 17.066406 17.066407 17.066406h34.132812c9.425781 0 17.066406-7.640625 17.066406-17.066406v-25.597657c0-9.425781-7.640625-17.066406-17.066406-17.066406zm-34.132812 42.664063v-25.597657h34.132812v25.597657zm0 0"
                                ></path>
                                <path
                                    d="m384 341.332031h-34.132812c-9.425782 0-17.066407 7.640625-17.066407 17.066407v25.601562c0 9.425781 7.640625 17.066406 17.066407 17.066406h34.132812c9.425781 0 17.066406-7.640625 17.066406-17.066406v-25.601562c0-9.425782-7.640625-17.066407-17.066406-17.066407zm-34.132812 42.667969v-25.601562h34.132812v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m384 418.132812h-34.132812c-9.425782 0-17.066407 7.640626-17.066407 17.066407v25.601562c0 9.425781 7.640625 17.066407 17.066407 17.066407h34.132812c9.425781 0 17.066406-7.640626 17.066406-17.066407v-25.601562c0-9.425781-7.640625-17.066407-17.066406-17.066407zm-34.132812 42.667969v-25.601562h34.132812v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m460.800781 264.535156h-34.132812c-9.425781 0-17.066407 7.640625-17.066407 17.066406v25.597657c0 9.425781 7.640626 17.066406 17.066407 17.066406h34.132812c9.425781 0 17.066407-7.640625 17.066407-17.066406v-25.597657c0-9.425781-7.640626-17.066406-17.066407-17.066406zm-34.132812 42.664063v-25.597657h34.132812v25.597657zm0 0"
                                ></path>
                                <path
                                    d="m460.800781 341.332031h-34.132812c-9.425781 0-17.066407 7.640625-17.066407 17.066407v25.601562c0 9.425781 7.640626 17.066406 17.066407 17.066406h34.132812c9.425781 0 17.066407-7.640625 17.066407-17.066406v-25.601562c0-9.425782-7.640626-17.066407-17.066407-17.066407zm-34.132812 42.667969v-25.601562h34.132812v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m460.800781 418.132812h-34.132812c-9.425781 0-17.066407 7.640626-17.066407 17.066407v25.601562c0 9.425781 7.640626 17.066407 17.066407 17.066407h34.132812c9.425781 0 17.066407-7.640626 17.066407-17.066407v-25.601562c0-9.425781-7.640626-17.066407-17.066407-17.066407zm-34.132812 42.667969v-25.601562h34.132812v25.601562zm0 0"
                                ></path>
                                <path
                                    d="m298.667969 204.800781h8.53125c4.714843 0 8.535156-3.820312 8.535156-8.535156 0-4.710937-3.820313-8.53125-8.535156-8.53125h-8.53125c-4.714844 0-8.535157 3.820313-8.535157 8.53125 0 4.714844 3.820313 8.535156 8.535157 8.535156zm0 0"
                                ></path>
                                <path
                                    d="m341.332031 204.800781h76.800781c4.714844 0 8.535157-3.820312 8.535157-8.535156 0-4.710937-3.820313-8.53125-8.535157-8.53125h-76.800781c-4.710937 0-8.53125 3.820313-8.53125 8.53125 0 4.714844 3.820313 8.535156 8.53125 8.535156zm0 0"
                                ></path>
                                <path
                                    d="m25.601562 460.800781h196.265626v17.066407c0 18.851562 15.28125 34.132812 34.132812 34.132812h221.867188c18.851562 0 34.132812-15.28125 34.132812-34.132812v-324.265626c0-18.851562-15.28125-34.136718-34.132812-34.136718h-110.933594v-95.316406c-.019532-13.328126-10.820313-24.1289068-24.148438-24.148438h-11.4375c-13.328125.0195312-24.128906 10.820312-24.148437 24.148438v95.316406h-25.597657v-44.117188c-.019531-13.328125-10.820312-24.128906-24.152343-24.148437h-11.433594c-13.328125.019531-24.128906 10.820312-24.148437 24.148437v334.253906h-17.066407v-248.953124c-.019531-13.3125-10.804687-24.097657-24.117187-24.113282h-11.5c-13.3125.015625-24.097656 10.800782-24.117188 24.113282v248.953124h-17.066406v-95.351562c-.019531-13.3125-10.804688-24.097656-24.113281-24.117188h-11.503907c-13.3125.019532-24.097656 10.804688-24.117187 24.117188v95.351562h-17.066406v-384c0-14.140624-11.460938-25.601562-25.597657-25.601562-14.140624 0-25.601562 11.460938-25.601562 25.601562v409.597657c0 14.140625 11.460938 25.601562 25.601562 25.601562zm136.53125-300.152343c.011719-3.890626 3.160157-7.039063 7.050782-7.046876h11.5c3.890625.007813 7.039062 3.15625 7.050781 7.046876v248.953124h-25.601563zm-76.800781 153.601562c.011719-3.890625 3.160157-7.039062 7.050781-7.050781h11.503907c3.886719.011719 7.039062 3.160156 7.046875 7.050781v95.351562h-25.601563zm409.601563-160.648438v324.265626c0 9.425781-7.640625 17.066406-17.066406 17.066406h-221.867188c-9.425781 0-17.066406-7.640625-17.066406-17.066406v-324.265626c0-9.425781 7.640625-17.066406 17.066406-17.066406h221.867188c9.425781 0 17.066406 7.640625 17.066406 17.066406zm-170.667969-129.453124c.003906-3.910157 3.175781-7.078126 7.082031-7.082032h11.4375c3.910156.003906 7.078125 3.171875 7.082032 7.082032v95.316406h-25.601563zm-78.25 44.117187h11.433594c3.910156.003906 7.078125 3.175781 7.085937 7.082031v44.117188h-8.535156c-6.007812.039062-11.902344 1.675781-17.066406 4.746094v-48.863282c.003906-3.90625 3.171875-7.078125 7.082031-7.082031zm-228.949219-42.664063c0-4.714843 3.820313-8.535156 8.535156-8.535156 4.710938 0 8.53125 3.820313 8.53125 8.535156v384c0 9.425782 7.640626 17.066407 17.066407 17.066407h170.667969v17.066406h-196.265626c-4.714843 0-8.535156-3.820313-8.535156-8.535156zm0 0"
                                ></path>
                            </svg>

                            <div class="pr-16 mt-auto">
                                <h2 class="font-600 dark-text my-2">Depozit kalkulyatori</h2>

                                <h5 class="mb-0 main-grey">Hissa sizning foyda hisoblash</h5>
                            </div>

                            <div class="slide-card-angle d-flex align-center justify-center">
                                <chevron-right-icon size="2x" class="text-white"></chevron-right-icon>
                            </div>
                        </router-link>
                    </v-col>

                    <v-col md="4">
                        <router-link
                            to="/"
                            class="
                                app-slide-card
                                pa-8
                                mx-2
                                rounded-lg
                                overflow-hidden
                                d-flex
                                flex-column
                                text-decoration-none
                                p-relative
                            "
                        >
                            <svg id="icon-open-account" viewBox="0 0 52.4 54.2">
                                <path
                                    d="M9.4,43.1c0,0.6-0.5,1.1-1.1,1.1c-0.6,0-1.1-0.5-1.1-1.1c0-0.6,0.5-1.1,1.1-1.1 C8.9,42,9.4,42.5,9.4,43.1L9.4,43.1z M9.4,43.1"
                                ></path>
                                <path
                                    d="M50,30.5c0,0.6-0.5,1.1-1.1,1.1c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1 C49.5,29.4,50,29.9,50,30.5L50,30.5z M50,30.5"
                                ></path>
                                <path
                                    d="M36.6,22.5H35c-0.5,0-0.9-0.4-0.9-0.9v-0.9c0-0.5,0.4-0.9,0.9-0.9h1.8 c0.4,0,0.8,0.3,0.8,0.8c0,0.6,0.5,1.1,1.1,1.1c0.6,0,1.1-0.5,1.1-1.1c0-1.6-1.3-2.8-2.8-2.9v-0.9c0-0.6-0.5-1.1-1.1-1.1 c-0.6,0-1.1,0.5-1.1,1.1v0.9c-1.6,0.1-2.8,1.4-2.8,3v0.9c0,1.7,1.4,3.1,3.1,3.1h1.6c0.5,0,0.9,0.4,0.9,0.9v0.9 c0,0.5-0.4,0.9-0.9,0.9h-1.8c-0.4,0-0.8-0.3-0.8-0.8c0-0.6-0.5-1.1-1.1-1.1c-0.6,0-1.1,0.5-1.1,1.1c0,1.6,1.3,2.8,2.8,2.9v0.9 c0,0.6,0.5,1.1,1.1,1.1c0.6,0,1.1-0.5,1.1-1.1v-0.9c1.6-0.1,2.8-1.4,2.8-3v-0.9C39.7,23.9,38.3,22.5,36.6,22.5L36.6,22.5z M36.6,22.5"
                                ></path>
                                <path
                                    d="M52,35.9c-0.4-1-1.2-1.7-2.2-2.1c-1-0.4-2.1-0.4-3.1,0.1c0,0,0,0,0,0L40,36.9 c-0.5,0.2-0.8,0.9-0.5,1.4c0.2,0.5,0.9,0.8,1.4,0.5l6.7-3.1c0.5-0.2,1-0.2,1.5,0c0.5,0.2,0.9,0.5,1.1,1c0.2,0.5,0.2,1,0,1.5 c-0.2,0.5-0.5,0.9-1,1.1l-13.7,6c-2.2,1-4.6,0.9-6.7-0.2l-5-2.5c-2.7-1.3-5.8-1.4-8.5-0.2l-0.1,0l-3.7-8.4l5.2-2.3 c2.5-1.1,5.2-1.2,7.7-0.2l10.1,3.7c0.9,0.3,1.4,1.3,1.1,2.2c-0.3,0.9-1.3,1.4-2.2,1.1L25.5,36c-0.6-0.2-1.2,0.1-1.3,0.7 c-0.2,0.6,0.1,1.2,0.7,1.3l7.8,2.6c0.4,0.1,0.8,0.2,1.2,0.2c1.6,0,3.1-1,3.7-2.6c0.7-2-0.4-4.2-2.3-4.9l-10.1-3.7 c-0.7-0.2-1.4-0.4-2.1-0.6v-5.9c0-5.8,4.7-10.5,10.5-10.5h3.9c5.8,0,10.5,4.7,10.5,10.5V26c0,0.6,0.5,1.1,1.1,1.1 c0.6,0,1.1-0.5,1.1-1.1v-2.8c0-6.1-4.4-11.2-10.2-12.4V7.7l2.7-4.6c0.2-0.3,0.2-0.6,0.1-0.9c-0.1-0.3-0.3-0.5-0.6-0.6l-3.3-1.5 c-0.3-0.1-0.5-0.1-0.8,0l-2.4,0.9l-2.2-0.9c-0.2-0.1-0.5-0.1-0.8,0l-3.4,1.3c-0.3,0.1-0.5,0.3-0.6,0.6c-0.1,0.3-0.1,0.6,0.1,0.9 l2.6,4.8v3.2c-5.8,1.1-10.3,6.2-10.3,12.4v5.7c-1.8,0-3.5,0.3-5.1,1.1l-5.2,2.3c-0.3-0.4-0.7-0.8-1.2-1c-0.7-0.3-1.4-0.2-2,0 l-6.7,2.9c-0.4,0.2-0.6,0.5-0.6,1v18c0,0.4,0.2,0.7,0.5,0.9c0.2,0.1,0.4,0.2,0.6,0.2c0.2,0,0.3,0,0.5-0.1l13-6.6 c0.6-0.3,1.1-0.8,1.4-1.4c0.2-0.5,0.2-1.1,0.1-1.6l0.1,0c2.2-1,4.6-0.9,6.7,0.2l5,2.5c2.7,1.3,5.8,1.4,8.5,0.2l13.7-6 c1-0.4,1.7-1.2,2.1-2.2C52.5,38,52.5,36.9,52,35.9L52,35.9z M37.7,10.6h-4.4V8.4h4.4V10.6z M31,2.9l1.9-0.7l2.1,0.9 c0.2,0.1,0.5,0.1,0.8,0l2.4-0.9L40,3l-1.9,3.3h-5.2L31,2.9z M13.7,45.6C13.7,45.6,13.6,45.6,13.7,45.6L2.1,51.5v-4.3l3-1.5 c0.5-0.3,0.7-0.9,0.5-1.4c-0.3-0.5-0.9-0.7-1.4-0.5l-2,1v-8.9l6.1-2.7c0.2-0.1,0.3,0,0.4,0c0.1,0,0.2,0.1,0.3,0.3L9.1,34 c0,0,0,0,0,0l0,0L13.9,45C14,45.2,13.9,45.5,13.7,45.6L13.7,45.6z M13.7,45.6"
                                ></path>
                            </svg>

                            <div class="pr-16 mt-auto">
                                <h2 class="font-600 dark-text my-2">Omonat ochish</h2>

                                <h5 class="mb-0 main-grey">Pulingizni xavsiz saqlash</h5>
                            </div>

                            <div class="slide-card-angle d-flex align-center justify-center">
                                <chevron-right-icon size="2x" class="text-white"></chevron-right-icon>
                            </div>
                        </router-link>
                    </v-col>

                    <v-col md="4">
                        <router-link
                            :to="{ name: 'Scoring' }"
                            class="
                                app-slide-card
                                pa-8
                                mx-2
                                rounded-lg
                                overflow-hidden
                                d-flex
                                flex-column
                                text-decoration-none
                                p-relative
                            "
                        >
                            <svg id="icon-scoring" viewBox="0 0 512 512">
                                <path
                                    d="M314.733,144.067h128c5.12,0,8.533-3.413,8.533-8.533S447.853,127,442.733,127h-128c-5.12,0-8.533,3.413-8.533,8.533     S309.613,144.067,314.733,144.067z"
                                ></path>
                                <path
                                    d="M357.4,109.933h34.133c5.12,0,8.533-3.413,8.533-8.533s-3.413-8.533-8.533-8.533H357.4c-5.12,0-8.533,3.413-8.533,8.533     S352.28,109.933,357.4,109.933z"
                                ></path>
                                <path
                                    d="M442.733,161.133h-68.267c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h68.267     c5.12,0,8.533-3.413,8.533-8.533S447.853,161.133,442.733,161.133z"
                                ></path>
                                <path
                                    d="M58.733,135.533h128c5.12,0,8.533-3.413,8.533-8.533s-3.413-8.533-8.533-8.533h-128c-5.12,0-8.533,3.413-8.533,8.533     S53.613,135.533,58.733,135.533z"
                                ></path>
                                <path
                                    d="M195.267,161.133c0-5.12-3.413-8.533-8.533-8.533h-128c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h128     C191.853,169.667,195.267,166.253,195.267,161.133z"
                                ></path>
                                <path
                                    d="M101.4,101.4h34.133c5.12,0,8.533-3.413,8.533-8.533c0-5.12-3.413-8.533-8.533-8.533H101.4     c-5.12,0-8.533,3.413-8.533,8.533C92.867,97.987,96.28,101.4,101.4,101.4z"
                                ></path>
                                <path
                                    d="M195.267,195.267c0-5.12-3.413-8.533-8.533-8.533h-68.267c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533     h68.267C191.853,203.8,195.267,200.387,195.267,195.267z"
                                ></path>
                                <path
                                    d="M421.4,322.413c34.987-23.893,64.853-52.907,87.893-87.893c0.853-1.707,1.707-3.413,1.707-5.12V7.533     C511,2.413,507.587-1,502.467-1h-256H7.533C2.413-1-1,2.413-1,7.533v307.2c0,5.12,3.413,8.533,8.533,8.533h162.133v42.667     c0,5.12,3.413,8.533,8.533,8.533h47.787L106.52,493.933H7.533c-5.12,0-8.533,3.413-8.533,8.533S2.413,511,7.533,511h238.933h256     c5.12,0,8.533-3.413,8.533-8.533s-3.413-8.533-8.533-8.533H386.413L266.947,374.467h47.787c5.12,0,8.533-3.413,8.533-8.533     v-42.667h47.787l99.84,99.84c1.707,1.707,3.413,2.56,5.973,2.56s4.267-0.853,5.973-2.56c3.413-3.413,3.413-8.533,0-11.947     l-87.893-87.893h22.187C418.84,323.267,420.547,322.413,421.4,322.413z M429.08,295.107c2.56-17.92,2.56-36.693-0.853-55.467     c18.773,2.56,36.693,3.413,55.467,0.853C468.333,260.973,449.56,278.893,429.08,295.107z M16.067,16.067h221.867V306.2H178.2     H16.067V16.067z M237.933,386.413v107.52h-107.52L237.933,386.413z M255,493.933v-107.52l107.52,107.52H255z M306.2,357.4     H186.733v-34.133h59.733H306.2V357.4z M300.227,252.44l53.76,53.76h-39.253H255V16.067h238.933v205.96     c-25.031,3.911-50.062,3.533-75.093-1.16c-2.56-0.853-5.973,0.853-7.68,2.56s-2.56,5.12-1.707,7.68     c5.12,22.187,5.973,43.52,2.56,65.707l-1.482,9.387H377.88l-65.707-65.707c-3.413-3.413-8.533-3.413-11.947,0     S296.813,249.027,300.227,252.44z"
                                ></path>
                            </svg>

                            <div class="pr-16 mt-auto">
                                <h2 class="font-600 dark-text my-2">Skoring</h2>

                                <h5 class="mb-0 main-grey">Kredit olish imkoniyatini hisoblang</h5>
                            </div>

                            <div class="slide-card-angle d-flex align-center justify-center">
                                <chevron-right-icon size="2x" class="text-white"></chevron-right-icon>
                            </div>
                        </router-link>
                    </v-col>
                </v-row>
            </v-container>
        </section>
    </div>
</template>

<script>
    import { ChevronRightIcon } from 'vue-feather-icons'

    export default {
        name: 'AboutDeposit',
        props: {
            depositDetail: {
                type: Object,
                default: () => {},
            },
        },
        components: {
            ChevronRightIcon,
        },
        data() {
            return {
                rangeModel: {
                    rangeValue: '',
                    rangeMax: 0,
                },
                maxLengthAmount: '',
                calcModel: {
                    amount: '',
                    duration: [],
                },
                additionalDetails: [],
                radios: {},
            }
        },
        watch: {
            'calcModel.amount'(val) {
                /*
                 * Форматируем числа
                 * 100, 1 000, 10 000, 100 000, ...
                 * */
                const result = String(val)
                    .replace(/\D/g, '')
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ' ')

                /*
                 * Убераем все пробелы из суммы.
                 * */
                const removeWhiteSpaces = result.replace(/ /g, '')

                // Присваиваем если пользователь ввел больше чем от лимита
                if (removeWhiteSpaces > this.rangeModel.rangeMax) {
                    this.calcModel.amount = this.rangeModel.rangeMax

                    return false
                }

                this.calcModel.amount = result

                this.rangeModel.rangeValue = removeWhiteSpaces
            },
        },
        mounted() {
            this.depositProperty()
        },
        methods: {
            /*
             * Получение доп. информации депозита
             * */
            depositProperty() {
                this.$http.get(`/1/deposit/${this.$route.params.id}/property/`).then(({ data }) => {
                    const { amount } = data.results[0]
                    const length = String(amount).length

                    this.rangeModel.rangeMax = amount
                    this.additionalDetails = data.results
                    this.calcModel.duration = data.results[0].deposit_period

                    if (length % 3 === 0) this.maxLengthAmount = length + Math.floor(length / 3 - 1)
                    else this.maxLengthAmount = length + Math.floor(length / 3)
                })
            },

            /*
             *
             * */
            dragging(val) {
                this.calcModel.amount = val
            },

            /*
             *
             * */
            getTrackSize($event) {
                const $label = document.querySelectorAll('.track-label')
                const $currentLabel = $event.target.closest('.track-label')

                $label.forEach((item) => item.classList.remove('active'))
                $currentLabel.classList.add('active')
            },
        },
    }
</script>

<style></style>
